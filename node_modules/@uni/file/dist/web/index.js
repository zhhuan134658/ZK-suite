!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.uni_file=t():e.uni_file=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}({0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={WECHAT:"wechatMiniProgram",ALIPAY:"aliMiniApp",BYTE:"bytedanceMicroApp",WEB:"web",BAIDU:"baiduSmartProgram",KWAI:"kuaishouMiniProgram"}},1:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){return function(t){return new Promise((function(n,o){var i=t;e(r({},i,{success:function(e){i&&"function"==typeof i.success&&i.success(e),n(e)},onSuccess:function(e){i&&"function"==typeof i.onSuccess&&i.onSuccess(e),n(e)},fail:function(e){i&&"function"==typeof i.fail&&i.fail(e),o(e)},onFail:function(e){i&&"function"==typeof i.onFail&&i.onFail(e),o(e)},complete:function(e){i&&"function"==typeof i.complete&&i.complete(e)},onComplete:function(e){i&&"function"==typeof i.onComplete&&i.onComplete(e)}}))}))}}n.d(t,"a",(function(){return f}));var i=["_ext"];function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){var n=e||{},r=n._ext,o=void 0===r?{}:r;return u({},function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,i),o[t]||{})};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f={upload:function(e,t){return function(n){var r=a({},{hideLoading:!1},c(n,t));return e(r)}},download:function(e,t){var n=function(e){return a({},e,{tempFilePath:e.tempFilePath||e.apFilePath})};return function(r){var o=c(r,t),i=a({},{url:""},o,{success:function(e){o.success&&o.success(n(e))},complete:function(e){o.complete&&o.complete(e.tempFilePath?n(e):e)}});return e(i)}},getInfo:function(e,t){var n=function(e){return a({},e,{size:e.size})};return function(r){var i=c(r,t),u=a({},{filePath:"",digestAlgorithm:"md5"},i,{success:function(e){i.success&&i.success(n(e))},complete:function(e){i.complete&&i.complete(e.size?n(e):e)}});return o(e)(u).then((function(e){return n(e)}))}},getSavedInfo:function(e,t){return function(n){var r=c(n,t),i=a({},{filePath:""},r,{success:function(e){r.success&&r.success(e)},complete:function(e){r.complete&&r.complete(e)}});return o(e)(i)}},getSavedList:function(e,t){var n=function(e){return a({},e,{fileList:e.fileList.map((function(e){return{size:e.size,createTime:e.createTime,filePath:e.filePath||e.apFilePath}}))})};return function(r){var i=c(r,t),u=a({},i,{success:function(e){i.success&&i.success(n(e))},complete:function(e){i.complete&&i.complete(e.fileList?n(e):e)}});return o(e)(u).then(n)}},save:function(e,t){var n=function(e){return a({},e,{savedFilePath:e.savedFilePath||e.apFilePath})};return function(r){var i=c(r,t),u=a({},{tempFilePath:""},i,{success:function(e){i.success&&i.success(n(e))},complete:function(e){i.complete&&i.complete(e.size?n(e):e)}});return o(e)(u).then(n)}},removeSaved:function(e,t){return function(n){var r=a({},{filePath:""},c(n,t));return o(e)(r)}},openDocument:function(e,t){return function(n){var r=a({},{filePath:"",fileType:"pdf"},c(n,t));return o(e)(r)}}}},13:function(e,t,n){e.exports=n(6)},6:function(e,t,n){"use strict";function r(){return Promise.reject(new Error("@uni：file.openDocument暂不支持"))}function o(){return Promise.reject(new Error("@uni：file.removeSavedFile暂不支持"))}n.r(t),n.d(t,"openDocument",(function(){return r})),n.d(t,"removeSaved",(function(){return o})),n.d(t,"upload",(function(){return f})),n.d(t,"save",(function(){return s})),n.d(t,"getSavedList",(function(){return l})),n.d(t,"getSavedInfo",(function(){return p})),n.d(t,"getInfo",(function(){return d})),n.d(t,"download",(function(){return v}));var i=n(1),u=n(0);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return t.forEach((function(e){var t=e.split(": "),r=t.shift(),o=t.join(": ");n[r]=o})),n}var f=i.a.upload((function(e){var t=e.filePath,n=e.formData,r=e.success,o=e.fail,i=e.complete,u="string"==typeof t?function(e,t){void 0===t&&(t="");var n,r,o=function(e){var t=e.split(","),n="image/png",r=t[0].match(/:(.*?);/);r&&(n=r[1]);for(var o=atob(t[1]),i=o.length,u=new Uint8Array(i);i--;)u[i]=o.charCodeAt(i);return new Blob([u],{type:n})}(e);return r=t,(n=o).lastModifiedDate=new Date,n.name=r,n}(t):t,f=new FormData;if(n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&f.append(s,n[s]);f.append(e.fileName||"file",u);var l=c({Accept:"application/json, text/plain, */*"},e.header||{}),p=new XMLHttpRequest,d=[];p.onreadystatechange=function(){if(p&&2===p.readyState&&d.length>0){var e=a(p);d.forEach((function(t){return t(e)}))}},p.onload=function(){var e={data:p.response,statusCode:p.status,errMsg:"uploadFile:ok",header:a(p)};r&&r(e),i&&i(e)},p.onerror=function(){o&&o({errMsg:"uploadFile:fail error"}),i&&i({errMsg:"uploadFile:fail error"})},p.onabort=function(){o&&o({errMsg:"uploadFile:fail abort"}),i&&i({errMsg:"uploadFile:fail abort"})};var v=[];for(var m in p.onprogress=function(e){if(0!==v.length){var t={progress:0,totalBytesSent:0,totalBytesExpectedToSend:0};e.lengthComputable&&(t.totalBytesSent=e.loaded,t.totalBytesExpectedToSend=e.total,t.progress=Math.floor(100*e.loaded/e.total)),v.forEach((function(e){return e(t)}))}},void 0===e.withCredentials?-1===e.url.indexOf(window.location.host)&&(p.withCredentials=!0):p.withCredentials=e.withCredentials,p.open("POST",e.url,!0),l)Object.prototype.hasOwnProperty.call(l,m)&&p.setRequestHeader(m,String(l[m]));return e.timeout&&(p.timeout=e.timeout,p.ontimeout=function(){o&&o({errMsg:"uploadFile:fail timeout"}),i&&i({errMsg:"uploadFile:fail timeout"})}),p.send(f),{abort:function(){p.abort()},onProgressUpdate:function(e){v.push(e)},offProgressUpdate:function(e){-1!==v.indexOf(e)&&v.splice(v.indexOf(e),1)},onHeadersReceived:function(e){d.push(e)},offHeadersReceived:function(e){-1!==d.indexOf(e)&&d.splice(d.indexOf(e),1)}}}),u.a.WEB);function s(){return Promise.reject(new Error("@uni：file.saveFile暂不支持"))}function l(){return Promise.reject(new Error("@uni：file.getSavedFileList暂不支持"))}function p(){return Promise.reject(new Error("@uni：file.getSavedFileInfo暂不支持"))}function d(){return Promise.reject(new Error("@uni：file.getFileInfo暂不支持"))}function v(){return Promise.reject(new Error("@uni：file.downloadFile暂不支持"))}t.default={openDocument:r,removeSaved:o,upload:f,save:s,getSavedList:l,getSavedInfo:p,getInfo:d,download:v}}})}));