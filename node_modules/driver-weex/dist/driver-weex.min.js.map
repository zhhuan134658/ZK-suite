{"version":3,"file":"driver-weex.min.js","sources":["../../style-unit/es/index.js","../../style-unit/node_modules/@babel/runtime/helpers/defineProperty.js","../../style-unit/node_modules/@uni/env/es/index.js","../../style-unit/node_modules/universal-env/lib/index.js","../../driver-dom/es/index.js","../src/index.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { isWeb, isWeex } from 'universal-env';\nvar RPX_REG = /\"[^\"]+\"|'[^']+'|url\\([^\\)]+\\)|(\\d*\\.?\\d+)rpx/g;\n\nvar __rpx_coefficient__;\n\nvar __viewport_width__; // convertUnit method targetPlatform\n\n\nvar targetPlatform = isWeb ? 'web' : isWeex ? 'weex' : ''; // Init toFixed method\n\nvar unitPrecision = 4;\n\nvar toFixed = function toFixed(number, precision) {\n  var multiplier = Math.pow(10, precision + 1);\n  var wholeNumber = Math.floor(number * multiplier);\n  return Math.round(wholeNumber / 10) * 10 / multiplier;\n}; // Dedault decimal px transformer.\n\n\nvar decimalPixelTransformer = function decimalPixelTransformer(rpx, $1) {\n  return $1 ? parseFloat(rpx) * getRpx() + 'px' : rpx;\n}; // Default decimal vw transformer.\n\n\nvar decimalVWTransformer = function decimalVWTransformer(rpx, $1) {\n  return $1 ? toFixed(parseFloat(rpx) / (getViewportWidth() / 100), unitPrecision) + 'vw' : rpx;\n}; // Default 1 rpx to 1 px\n\n\nif (getRpx() === undefined) {\n  setRpx(1);\n} // Viewport width, default to 750.\n\n\nif (getViewportWidth() === undefined) {\n  setViewportWidth(750);\n}\n\nvar CustomMap = /*#__PURE__*/function () {\n  function CustomMap() {\n    _defineProperty(this, \"__store\", {});\n  }\n\n  var _proto = CustomMap.prototype;\n\n  _proto.set = function set(key, value) {\n    this.__store[key + \"_\" + typeof key] = value;\n  };\n\n  _proto.get = function get(key) {\n    return this.__store[key + \"_\" + typeof key];\n  };\n\n  _proto.has = function has(key) {\n    return Object.prototype.hasOwnProperty.call(this.__store, key + \"_\" + typeof key);\n  };\n\n  return CustomMap;\n}();\n/**\n * Is string contains rpx\n * note: rpx is an alias to rpx\n * @param {String} str\n * @returns {Boolean}\n */\n\n\nexport function isRpx(str) {\n  return typeof str === 'string' && RPX_REG.test(str);\n}\n/**\n * Calculate rpx\n * @param {String} str\n * @returns {String}\n */\n\nexport function calcRpx(str) {\n  if (targetPlatform === 'web') {\n    // In Web convert rpx to 'vw', same as driver-dom and driver-universal\n    // '375rpx' => '50vw'\n    return str.replace(RPX_REG, decimalVWTransformer);\n  } else if (targetPlatform === 'weex') {\n    // In Weex convert rpx to 'px'\n    // '375rpx' => 375 * px\n    return str.replace(RPX_REG, decimalPixelTransformer);\n  } else {\n    // Other platform return original value, like Mini-App and WX Mini-Program ...\n    // '375rpx' => '375rpx'\n    return str;\n  }\n}\nexport function getRpx() {\n  return __rpx_coefficient__;\n}\nexport function setRpx(rpx) {\n  __rpx_coefficient__ = rpx;\n}\nexport function getViewportWidth() {\n  return __viewport_width__;\n}\nexport function setViewportWidth(viewport) {\n  __viewport_width__ = viewport;\n}\n/**\n * Set a function to transform unit of pixel,\n * default to passthrough.\n * @param {Function} transformer function\n */\n\nexport function setDecimalPixelTransformer(transformer) {\n  decimalPixelTransformer = transformer;\n}\n/**\n * Set unit precision.\n * @param n {Number} Unit precision, default to 4.\n */\n\nexport function setUnitPrecision(n) {\n  unitPrecision = n;\n}\n/**\n * Create a cached version of a pure function.\n * Use the first params as cache key.\n */\n\nexport function cached(fn) {\n  var cache = new CustomMap();\n  return function cachedFn() {\n    var key = arguments.length <= 0 ? undefined : arguments[0];\n    if (!cache.has(key)) cache.set(key, fn.apply(void 0, arguments));\n    return cache.get(key);\n  };\n}\nexport function setTargetPlatform(platform) {\n  targetPlatform = platform;\n}\n/**\n * Convert rpx.\n * @param value\n * @param prop\n * @param platform\n * @return {String} Transformed value.\n */\n\nexport var convertUnit = cached(function (value, prop, platform) {\n  if (platform) {\n    setTargetPlatform(platform);\n  }\n\n  return isRpx(value) ? calcRpx(value) : value;\n});","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export var isWeb = typeof window !== 'undefined' && 'onload' in window;\nexport var isNode = typeof process !== 'undefined' && !!(process.versions && process.versions.node);\nexport var isWeex = typeof WXEnvironment !== 'undefined' && WXEnvironment.platform !== 'Web';\nexport var isKraken = typeof __kraken__ !== 'undefined';\nexport var isMiniApp = typeof my !== 'undefined' && my !== null && typeof my.alert !== 'undefined';\nexport var isByteDanceMicroApp = typeof tt !== 'undefined' && tt !== null && typeof tt.showToast !== 'undefined';\nexport var isBaiduSmartProgram = typeof swan !== 'undefined' && swan !== null && typeof swan.showToast !== 'undefined';\nexport var isKuaiShouMiniProgram = typeof ks !== 'undefined' && ks !== null && typeof ks.showToast !== 'undefined'; // In wechat mini program, wx.login is a function\n// In wechat mini propgram webview, there is no wx.login, but exist wx.miniProgram\n// In bytedance maicro app, there is wx variable.\n\nexport var isWeChatMiniProgram = !isByteDanceMicroApp && typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\nexport var isQuickApp = typeof global !== 'undefined' && global !== null && typeof global.callNative !== 'undefined' && !isWeex;\nexport default {\n  isWeb: isWeb,\n  isNode: isNode,\n  isWeex: isWeex,\n  isKraken: isKraken,\n  isMiniApp: isMiniApp,\n  isByteDanceMicroApp: isByteDanceMicroApp,\n  isBaiduSmartProgram: isBaiduSmartProgram,\n  isKuaiShouMiniProgram: isKuaiShouMiniProgram,\n  isWeChatMiniProgram: isWeChatMiniProgram,\n  isQuickApp: isQuickApp\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _env = require(\"@uni/env\");\n\nObject.keys(_env).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _env[key]) return;\n  exports[key] = _env[key];\n});","/**\n * Driver for Web DOM\n **/\nimport { convertUnit, setViewportWidth, setUnitPrecision, cached } from 'style-unit';\nimport { warnForReplacedHydratebleElement, warnForDeletedHydratableElement, warnForInsertedHydratedElement } from './warning'; // opacity -> opa\n// fontWeight -> ntw\n// lineHeight|lineClamp -> ne[ch]\n// flex|flexGrow|flexPositive|flexShrink|flexNegative|boxFlex|boxFlexGroup|zIndex -> ex(?:s|g|n|p|$)\n// order -> ^ord\n// zoom -> zoo\n// gridArea|gridRow|gridRowEnd|gridRowSpan|gridRowStart|gridColumn|gridColumnEnd|gridColumnSpan|gridColumnStart -> grid\n// columnCount -> mnc\n// tabSize -> bs\n// orphans -> orp\n// windows -> ows\n// animationIterationCount -> onit\n// borderImageOutset|borderImageSlice|borderImageWidth -> erim\n\nvar NON_DIMENSIONAL_REG = /opa|ntw|ne[ch]|ex(?:s|g|n|p|$)|^ord|zoo|grid|orp|ows|mnc|^columns$|bs|erim|onit/i;\nvar EVENT_PREFIX_REG = /^on[A-Z]/;\nvar DANGEROUSLY_SET_INNER_HTML = 'dangerouslySetInnerHTML';\nvar HTML = '__html';\nvar INNER_HTML = 'innerHTML';\nvar CLASS_NAME = 'className';\nvar CLASS = 'class';\nvar STYLE = 'style';\nvar CHILDREN = 'children';\nvar TEXT_CONTENT_ATTR = 'textContent';\nvar CREATE_ELEMENT = 'createElement';\nvar CREATE_COMMENT = 'createComment';\nvar CREATE_TEXT_NODE = 'createTextNode';\nvar SET_ATTRIBUTE = 'setAttribute';\nvar REMOVE_ATTRIBUTE = 'removeAttribute';\nvar SVG_NS = 'http://www.w3.org/2000/svg';\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\nvar TEXT_SPLIT_COMMENT = '|';\nvar EMPTY = '';\nvar HYDRATION_INDEX = '__i';\nvar HYDRATION_APPEND = '__a';\nvar WITH_INNERHTML = '__h';\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar tagNamePrefix = EMPTY; // Flag indicating if the diff is currently within an SVG\n\nvar isSVGMode = false;\nvar isHydrating = false;\n/**\n * Camelize CSS property.\n * Vendor prefixes should begin with a capital letter.\n * For example:\n * background-color -> backgroundColor\n * -webkit-transition -> webkitTransition\n */\n\nvar camelizeStyleName = cached(function (name) {\n  return name.replace(/-([a-z])/gi, function (s, g) {\n    return g.toUpperCase();\n  });\n});\nvar isDimensionalProp = cached(function (prop) {\n  return !NON_DIMENSIONAL_REG.test(prop);\n});\nvar isEventProp = cached(function (prop) {\n  return EVENT_PREFIX_REG.test(prop);\n});\nexport function setTagNamePrefix(prefix) {\n  tagNamePrefix = prefix;\n}\nexport function createBody() {\n  return document.body;\n}\nexport function createEmpty(component) {\n  var parent = component._parent;\n  var node;\n\n  if (isHydrating) {\n    var hydrationChild = findHydrationChild(parent);\n\n    if (hydrationChild) {\n      if (hydrationChild.nodeType === COMMENT_NODE) {\n        return hydrationChild;\n      } else {\n        node = document[CREATE_COMMENT](EMPTY);\n        replaceChild(node, hydrationChild, parent);\n      }\n    } else {\n      node = document[CREATE_COMMENT](EMPTY);\n      node[HYDRATION_APPEND] = true;\n    }\n  } else {\n    node = document[CREATE_COMMENT](EMPTY);\n  }\n\n  return node;\n}\nexport function createText(text, component) {\n  var parent = component._parent;\n  var node;\n\n  if (isHydrating) {\n    var hydrationChild = findHydrationChild(parent);\n\n    if (hydrationChild) {\n      if (hydrationChild.nodeType === TEXT_NODE) {\n        if (text !== hydrationChild[TEXT_CONTENT_ATTR]) {\n          hydrationChild[TEXT_CONTENT_ATTR] = text;\n        }\n\n        return hydrationChild;\n      } else {\n        node = document[CREATE_TEXT_NODE](text);\n        replaceChild(node, hydrationChild, parent);\n      }\n    } else {\n      node = document[CREATE_TEXT_NODE](text);\n      node[HYDRATION_APPEND] = true;\n    }\n  } else {\n    node = document[CREATE_TEXT_NODE](text);\n  }\n\n  return node;\n}\nexport function updateText(node, text) {\n  node[TEXT_CONTENT_ATTR] = text;\n}\n\nfunction findHydrationChild(parent) {\n  var childNodes = parent.childNodes;\n\n  if (parent[HYDRATION_INDEX] == null) {\n    parent[HYDRATION_INDEX] = 0;\n  }\n\n  var child = childNodes[parent[HYDRATION_INDEX]++]; // If child is an comment node for spliting text node, use the next node.\n\n  if (child && child.nodeType === COMMENT_NODE && child.data === TEXT_SPLIT_COMMENT) {\n    return childNodes[parent[HYDRATION_INDEX]++];\n  } else {\n    return child;\n  }\n}\n/**\n * @param {string} type node type\n * @param {object} props elemement properties\n * @param {object} component component instance\n * @param {boolean} __shouldConvertUnitlessToRpx should add unit when missing\n */\n\n\nexport function createElement(type, props, component, __shouldConvertUnitlessToRpx) {\n  var parent = component._parent;\n  isSVGMode = type === 'svg' || parent && parent.namespaceURI === SVG_NS;\n  var node;\n  var hydrationChild = null;\n\n  function createNode() {\n    if (isSVGMode) {\n      node = document.createElementNS(SVG_NS, type);\n    } else if (tagNamePrefix) {\n      var _tagNamePrefix = typeof _tagNamePrefix === 'function' ? _tagNamePrefix(type) : _tagNamePrefix;\n\n      node = document[CREATE_ELEMENT](_tagNamePrefix + type);\n    } else {\n      node = document[CREATE_ELEMENT](type);\n    }\n  }\n\n  if (isHydrating) {\n    hydrationChild = findHydrationChild(parent);\n\n    if (hydrationChild) {\n      if (type === hydrationChild.nodeName.toLowerCase()) {\n        for (var attributes = hydrationChild.attributes, i = attributes.length; i--;) {\n          var attribute = attributes[i];\n          var attributeName = attribute.name;\n          var propValue = props[attributeName];\n\n          if ( // The class or className prop all not in props\n          attributeName === CLASS && props[CLASS_NAME] == null && propValue == null || // The style prop is empty object or not in props\n          attributeName === STYLE && (propValue == null || Object.keys(propValue).length === 0) || // Remove rendered node attribute that not existed\n          attributeName !== CLASS && attributeName !== STYLE && propValue == null) {\n            hydrationChild[REMOVE_ATTRIBUTE](attributeName);\n            continue;\n          }\n\n          if (attributeName === STYLE) {\n            // Remove invalid style prop, and direct reset style to child avoid diff style\n            // Set style to empty will change the index of style, so here need to traverse style backwards\n            for (var l = hydrationChild.style.length; 0 < l; l--) {\n              // Prop name get from node style is hyphenated, eg: background-color\n              var stylePropName = hydrationChild.style[l - 1]; // Style with webkit prefix, will cause stylePropName be undefined in iOS 10.1 and 10.2.\n              // Eg. when set transition-timing-function to be empty, it will also delete -webkit-transition-timing-function.\n\n              if (stylePropName) {\n                var camelizedStyleName = camelizeStyleName(stylePropName);\n\n                if (propValue[camelizedStyleName] == null) {\n                  hydrationChild.style[camelizedStyleName] = EMPTY;\n                }\n              }\n            }\n          }\n        }\n\n        node = hydrationChild;\n      } else {\n        createNode();\n        replaceChild(node, hydrationChild, parent);\n\n        if (__DEV__) {\n          warnForReplacedHydratebleElement(parent, node, hydrationChild);\n        }\n      }\n    } else {\n      createNode();\n      node[HYDRATION_APPEND] = true;\n\n      if (__DEV__) {\n        warnForInsertedHydratedElement(parent, node);\n      }\n    }\n  } else {\n    createNode();\n  }\n\n  for (var prop in props) {\n    var value = props[prop];\n    if (prop === CHILDREN) continue;\n\n    if (value != null) {\n      if (prop === STYLE) {\n        setStyle(node, value, __shouldConvertUnitlessToRpx);\n      } else if (isEventProp(prop)) {\n        addEventListener(node, prop.slice(2).toLowerCase(), value, component);\n      } else {\n        setAttribute(node, prop, value, isSVGMode);\n      }\n    }\n  }\n\n  return node;\n}\nexport function appendChild(node, parent) {\n  if (!isHydrating || node[HYDRATION_APPEND]) {\n    return parent.appendChild(node);\n  }\n}\nexport function removeChild(node, parent) {\n  parent = parent || node.parentNode; // Maybe has been removed when remove child\n\n  if (parent) {\n    parent.removeChild(node);\n  }\n}\nexport function replaceChild(newChild, oldChild, parent) {\n  parent = parent || oldChild.parentNode;\n  parent.replaceChild(newChild, oldChild);\n}\nexport function insertAfter(node, after, parent) {\n  parent = parent || after.parentNode;\n  var nextSibling = after.nextSibling;\n\n  if (nextSibling) {\n    // Performance improve when node has been existed before nextSibling\n    if (nextSibling !== node) {\n      insertBefore(node, nextSibling, parent);\n    }\n  } else {\n    appendChild(node, parent);\n  }\n}\nexport function insertBefore(node, before, parent) {\n  parent = parent || before.parentNode;\n  parent.insertBefore(node, before);\n}\nexport function addEventListener(node, eventName, eventHandler) {\n  return node.addEventListener(eventName, eventHandler);\n}\nexport function removeEventListener(node, eventName, eventHandler) {\n  return node.removeEventListener(eventName, eventHandler);\n}\nexport function removeAttribute(node, propKey) {\n  if (propKey === DANGEROUSLY_SET_INNER_HTML) {\n    return node[INNER_HTML] = null;\n  }\n\n  if (propKey === CLASS_NAME) propKey = CLASS;\n\n  if (propKey in node) {\n    try {\n      // Some node property is readonly when in strict mode\n      node[propKey] = null;\n    } catch (e) {}\n  }\n\n  node[REMOVE_ATTRIBUTE](propKey);\n}\nexport function setAttribute(node, propKey, propValue, isSvg) {\n  if (propKey === DANGEROUSLY_SET_INNER_HTML) {\n    // For reduce innerHTML operation to improve performance.\n    if (node[INNER_HTML] !== propValue[HTML]) {\n      node[INNER_HTML] = propValue[HTML];\n    }\n\n    node[WITH_INNERHTML] = true;\n    return;\n  }\n\n  if (propKey === CLASS_NAME) propKey = CLASS; // Prop for svg can only be set by attribute\n\n  if (!isSvg && propKey in node) {\n    try {\n      // Some node property is readonly when in strict mode\n      node[propKey] = propValue;\n    } catch (e) {\n      node[SET_ATTRIBUTE](propKey, propValue);\n    }\n  } else {\n    node[SET_ATTRIBUTE](propKey, propValue);\n  }\n}\n/**\n * @param {object} node target node\n * @param {object} style target node style value\n * @param {boolean} __shouldConvertUnitlessToRpx\n */\n\nexport function setStyle(node, style, __shouldConvertUnitlessToRpx) {\n  for (var prop in style) {\n    var value = style[prop];\n    var convertedValue = void 0;\n\n    if (typeof value === 'number' && isDimensionalProp(prop)) {\n      if (__shouldConvertUnitlessToRpx) {\n        convertedValue = value + 'rpx'; // Transfrom rpx to vw\n\n        convertedValue = convertUnit(convertedValue);\n      } else {\n        convertedValue = value + 'px';\n      }\n    } else {\n      convertedValue = convertUnit(value);\n    } // Support CSS custom properties (variables) like { --main-color: \"black\" }\n\n\n    if (prop[0] === '-' && prop[1] === '-') {\n      // reference: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/setProperty.\n      // style.setProperty do not support Camel-Case style properties.\n      node.style.setProperty(prop, convertedValue);\n    } else {\n      node.style[prop] = convertedValue;\n    }\n  }\n}\nexport function beforeRender(_ref) {\n  var hydrate = _ref.hydrate;\n\n  // Nested render may reset `isHydrating`, `recolectHydrationChild` will not work correctly after render.\n  if (isHydrating && !hydrate) {\n    if (__DEV__) {\n      throw new Error('Nested render is not allowed when hydrating. ' + 'If necessary, trigger render in useEffect.');\n    } else {\n      throw new Error('Nested render found.');\n    }\n  }\n\n  isHydrating = hydrate;\n}\n\nfunction recolectHydrationChild(hydrationParent) {\n  // Should not to compare node with dangerouslySetInnerHTML because vdomLength is alway 0\n  if (hydrationParent[WITH_INNERHTML]) {\n    return;\n  }\n\n  var nativeLength = hydrationParent.childNodes.length;\n  var vdomLength = hydrationParent[HYDRATION_INDEX] || 0;\n\n  if (nativeLength - vdomLength > 0) {\n    for (var i = nativeLength - 1; i >= vdomLength; i--) {\n      if (__DEV__) {\n        warnForDeletedHydratableElement(hydrationParent, hydrationParent.childNodes[i]);\n      }\n\n      hydrationParent.removeChild(hydrationParent.childNodes[i]);\n    }\n  }\n\n  for (var j = hydrationParent.childNodes.length - 1; j >= 0; j--) {\n    recolectHydrationChild(hydrationParent.childNodes[j]);\n  }\n}\n\nexport function afterRender(_ref2) {\n  var container = _ref2.container;\n\n  if (isHydrating) {\n    // Remove native node when more then vdom node\n    recolectHydrationChild(container);\n    isHydrating = false;\n  }\n}\n/**\n * Remove all children from node.\n * @NOTE: Optimization at web.\n */\n\nexport function removeChildren(node) {\n  node.textContent = EMPTY;\n}\nexport {\n/**\n * Set viewport width.\n * @param viewport {Number} Viewport width, default to 750.\n*/\nsetViewportWidth,\n/**\n * Set unit precision.\n * @param n {Number} Unit precision, default to 4.\n */\nsetUnitPrecision };","import { setRpx, convertUnit } from 'style-unit';\nimport * as DriverDOM from 'driver-dom';\n\n// Use driver-dom in Weex V2\n/* global __weex_v2__ */\nconst isWeexV2 = typeof __weex_v2__ === 'object';\n\nconst STYLE = 'style';\nconst ID = 'id';\nconst TEXT = 'text';\nconst CHILDREN = 'children';\nconst EVENT_PREFIX_REGEXP = /^on[A-Z]/;\nconst ARIA_PREFIX_REGEXP = /^aria-/;\nconst HYPHEN_REGEXP = /\\-(\\w)/;\nconst EMPTY = '';\n\nfunction updateWeexTextValue(node) {\n  const value = node.children.map(function(child) {\n    // Comment node type\n    return child.nodeType === 8 ? child.value : EMPTY;\n  }).join(EMPTY);\n\n  node.setAttr('value', value);\n}\n\nconst nodeMaps = {};\n/* global __weex_document__ */\nconst weexDocument = typeof __weex_document__ === 'object' ?\n  __weex_document__ : typeof document === 'object' ?\n    document : null;\n\nexport function getElementById(id) {\n  if (isWeexV2) {\n    return document.getElementById(id);\n  }\n  return nodeMaps[id];\n}\n\nexport function createBody(type, props) {\n  if (isWeexV2) {\n    return DriverDOM.createBody();\n  }\n  if (weexDocument.body) {\n    return weexDocument.body;\n  }\n\n  const documentElement = weexDocument.documentElement;\n  const body = weexDocument.createBody(type, props);\n  documentElement.appendChild(body);\n\n  return body;\n}\n\nexport function createComment(content) {\n  return weexDocument.createComment(content);\n}\n\nexport function createEmpty(component) {\n  if (isWeexV2) {\n    return DriverDOM.createEmpty(component);\n  }\n  return createComment(EMPTY);\n}\n\nexport function createText(text, component) {\n  if (isWeexV2) {\n    return DriverDOM.createText(text, component);\n  }\n  // Use comment node type mock text node\n  return createComment(text);\n}\n\nexport function updateText(node, text) {\n  if (isWeexV2) {\n    return DriverDOM.updateText(node, text);\n  }\n  node.value = text;\n  updateWeexTextValue(node.parentNode);\n}\n\nexport function createElement(type, props, component) {\n  if (isWeexV2) {\n    return DriverDOM.createElement(type, props, component, true);\n  }\n  const style = {};\n  props = props || {};\n  const originStyle = props.style;\n  if (originStyle) {\n    for (let prop in originStyle) {\n      style[prop] = convertUnit(originStyle[prop], prop);\n    }\n  }\n\n  const node = weexDocument.createElement(type, {\n    style\n  });\n\n  for (let prop in props) {\n    let value = props[prop];\n    if (prop === CHILDREN) {\n      continue;\n    }\n    if (value != null) {\n      if (prop === STYLE) {\n        continue;\n      } else if (EVENT_PREFIX_REGEXP.test(prop)) {\n        let eventName = prop.slice(2).toLowerCase();\n        addEventListener(node, eventName, value, props);\n      } else {\n        setAttribute(node, prop, value);\n      }\n    }\n  }\n\n  return node;\n}\n\nexport function appendChild(node, parent) {\n  if (isWeexV2) {\n    return DriverDOM.appendChild(node, parent);\n  }\n  parent.appendChild(node);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function removeChild(node, parent) {\n  if (isWeexV2) {\n    return DriverDOM.removeChild(node, parent);\n  }\n  parent = parent || node.parentNode;\n  let id = node.attr && node.attr[ID];\n  if (id != null) {\n    nodeMaps[id] = null;\n  }\n\n  parent.removeChild(node);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function replaceChild(newChild, oldChild, parent) {\n  if (isWeexV2) {\n    return DriverDOM.replaceChild(newChild, oldChild, parent);\n  }\n  parent = parent || oldChild.parentNode;\n  let previousSibling = oldChild.previousSibling;\n  let nextSibling = oldChild.nextSibling;\n  removeChild(oldChild, parent);\n\n  if (previousSibling) {\n    insertAfter(newChild, previousSibling, parent);\n  } else if (nextSibling) {\n    insertBefore(newChild, nextSibling, parent);\n  } else {\n    appendChild(newChild, parent);\n  }\n}\n\nexport function insertAfter(node, after, parent) {\n  if (isWeexV2) {\n    return DriverDOM.insertAfter(node, after, parent);\n  }\n  parent = parent || after.parentNode;\n  parent.insertAfter(node, after);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function insertBefore(node, before, parent) {\n  if (isWeexV2) {\n    return DriverDOM.insertBefore(node, before, parent);\n  }\n  parent = parent || before.parentNode;\n  parent.insertBefore(node, before);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function addEventListener(node, eventName, eventHandler, props) {\n  if (isWeexV2) {\n    return DriverDOM.addEventListener(node, eventName, eventHandler);\n  }\n  // https://github.com/apache/incubator-weex/blob/master/runtime/vdom/Element.js#L421\n  let params = props[eventName + 'EventParams'];\n  return node.addEvent(eventName, eventHandler, params);\n}\n\nexport function removeEventListener(node, eventName, eventHandler) {\n  if (isWeexV2) {\n    return DriverDOM.removeEventListener(node, eventName, eventHandler);\n  }\n  return node.removeEvent(eventName, eventHandler);\n}\n\nexport function removeAttribute(node, propKey, propValue) {\n  if (isWeexV2) {\n    return DriverDOM.removeAttribute(node, propKey);\n  }\n  if (propKey == ID) {\n    nodeMaps[propValue] = null;\n  }\n  // Weex native will crash when pass null value\n  return node.setAttr(propKey, undefined, false);\n}\n\nexport function setAttribute(node, propKey, propValue, isSvg) {\n  if (isWeexV2) {\n    return DriverDOM.setAttribute(node, propKey, propValue, isSvg);\n  }\n  if (propKey == ID) {\n    nodeMaps[propValue] = node;\n  }\n\n  // Weex only support `ariaLabel` format, convert `aria-label` format to camelcase\n  if (ARIA_PREFIX_REGEXP.test(propKey)) {\n    propKey = propKey.replace(HYPHEN_REGEXP, function(m, p) {\n      return p.toUpperCase();\n    });\n  }\n\n  return node.setAttr(propKey, propValue, false);\n}\n\nexport function setStyle(node, style) {\n  if (isWeexV2) {\n    return DriverDOM.setStyle(node, style, true);\n  }\n  for (let prop in style) {\n    // Translate `rpx` to weex `px`\n    style[prop] = convertUnit(style[prop], prop);\n  }\n  node.setStyles(style);\n}\n\nexport function beforeRender() {\n  // Turn off batched updates\n  weexDocument.open();\n\n  // Set `rpx` unit converter\n  setRpx(1);\n}\n\nexport function afterRender() {\n  if (weexDocument.listener && weexDocument.listener.createFinish) {\n    weexDocument.listener.createFinish();\n  }\n\n  // Turn on batched updates\n  weexDocument.close();\n}\n"],"names":["__rpx_coefficient__","__viewport_width__","module","obj","key","value","Object","defineProperty","enumerable","configurable","writable","exports","isWeb","window","isNode","process","versions","node","isWeex","WXEnvironment","platform","isKraken","__kraken__","isMiniApp","my","alert","isByteDanceMicroApp","tt","showToast","isBaiduSmartProgram","swan","isKuaiShouMiniProgram","ks","isWeChatMiniProgram","wx","request","miniProgram","isQuickApp","global","callNative","keys","_env","forEach","RPX_REG","targetPlatform","decimalPixelTransformer","rpx","$1","parseFloat","getRpx","decimalVWTransformer","number","getViewportWidth","Math","round","floor","multiplier","pow","undefined","setRpx","CustomMap","_defineProperty","this","_proto","prototype","set","__store","get","has","hasOwnProperty","call","cached","fn","cache","arguments","length","apply","convertUnit","prop","setTargetPlatform","str","test","replace","calcRpx","NON_DIMENSIONAL_REG","EVENT_PREFIX_REG","DANGEROUSLY_SET_INNER_HTML","HTML","CLASS_NAME","CLASS","SVG_NS","isSVGMode","name","s","g","toUpperCase","isDimensionalProp","isEventProp","appendChild","parent","insertBefore","before","parentNode","addEventListener","eventName","eventHandler","setAttribute","propKey","propValue","isSvg","e","setStyle","style","__shouldConvertUnitlessToRpx","convertedValue","setProperty","isWeexV2","__weex_v2__","ID","TEXT","EVENT_PREFIX_REGEXP","ARIA_PREFIX_REGEXP","HYPHEN_REGEXP","updateWeexTextValue","children","map","child","nodeType","join","setAttr","nodeMaps","weexDocument","__weex_document__","document","createComment","content","DriverDOM","type","removeChild","id","attr","insertAfter","after","nextSibling","props","addEvent","m","p","listener","createFinish","close","open","body","documentElement","createBody","component","_parent","namespaceURI","createElementNS","slice","toLowerCase","originStyle","createElement","text","getElementById","removeEventListener","removeEvent","newChild","oldChild","replaceChild","previousSibling","setStyles"],"mappings":"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"}